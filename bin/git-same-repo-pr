#! /bin/bash

OWNER=$(ruby -e "puts \`git remote -v\`.match(/git@github.com:([a-z\-]+)\/[a-z\-_.]+/)[1]")
BRANCH=$(ruby -e "puts \`git branch\`.match(/\n\*\ ([a-z0-9\-_]+)/)[1]")

if [ -z $(which open) ]; then
  hub pull-request -h ${OWNER}:${BRANCH}
else
  hub pull-request -h ${OWNER}:${BRANCH} | open
fi
